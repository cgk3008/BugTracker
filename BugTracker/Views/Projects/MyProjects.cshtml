@model IEnumerable<BugTracker.Models.Project>

@{
	ViewBag.Title = "MyProjects";
}

<h2>My Projects</h2>
<br />
@*<h3>
	@if (User.IsInRole("Admin") || User.IsInRole("Project Manager"))
	{ 
		@Html.ActionLink("Create New Project", "Create")
	}
</h3>*@

<h3>
	@if (User.IsInRole("Submitter"))
	{
		@Html.ActionLink("Create New Ticket", "Create", "Tickets")
		<br />
		<br />
	}
</h3>



<table class="table">
	<tr>
		<th>
			Project Name
		</th>
		<th></th>
	</tr>

	@foreach (var item in Model)
	{
		<tr>
			<td>
				@Html.DisplayFor(modelItem => item.Name)

				<ul>
					@foreach (var u in item.Users)
					{
						<li>
							@u.FullName @Html.ActionLink("Remove User from Project", "RemoveUser", "AdminProjects", new { id = item.Id }, null)
						</li>
					}
				</ul>
			</td>
			<td>
				@Html.ActionLink("Add User to Project", "AddToProject", "AdminProjects", new { id = item.Id }, null) |
				@if (User.IsInRole("Admin") || User.IsInRole("Project Manager"))
				{
					@Html.ActionLink("Edit", "Edit", new { id = item.Id }) 
					
				}
				@Html.ActionLink("Details", "Details", new { id = item.Id })

				@if (User.IsInRole("Admin"))
				{
					
					@Html.ActionLink("Delete", "Delete", new { id = item.Id })
				}
			</td>
		</tr>
	}

</table>
