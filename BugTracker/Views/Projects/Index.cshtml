@model IEnumerable<BugTracker.Models.Project>

@{
	ViewBag.Title = "Index";
}



<div class="main-content">
	<div class="container">

		<div class="page-content">

			<!-- Heading -->
			<div class="single-head">
				<!-- Heading -->
				<h2 class="pull-left"><i class="fa fa-desktop blue"></i> Index of Projects</h2>
				<!-- Bread crumbs -->
				<div class="breads pull-right">
					@*<strong>Nav</strong> : <a href="#">Home</a> / <a href="#">Sign</a> / Home*@
				</div>
				<div class="clearfix"></div>
			</div>

			<div class="page-grid">
				<div class="container">
					<div class="col-md-4">
						<strong>
							<h3>
								@Html.ActionLink("Create New Project", "Create")
								<br />
								<br />
							</h3>
						</strong>
					</div>



					<div class="col-md-4">
						<strong>
							<h3>
								@Html.ActionLink("See Soft Deleted Projects", "SoftDeleteIndex")
								<br />
								<br />
							</h3>
						</strong>

					</div>




					<table id="mytable" class="table">
						<thead>
							<tr>
								<th>
									@Html.DisplayNameFor(model => model.Name)
								</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
							@foreach (var item in Model)
							{
								if (item.IsDeleted == false)
								{
									<tr>
										<td>
											@Html.DisplayFor(modelItem => item.Name) | PM: @Html.DisplayFor(modelItem => item.PmId)

											<ul>
												@foreach (var u in item.Users)
												{
													<li>
														@u.FullName @Html.ActionLink(" -- Remove User", "RemoveUser", "AdminProjects", new { id = item.Id }, null)
													</li>
												}
											</ul>
										</td>
										<td>
											@Html.ActionLink("Add User to Project", "AddToProject", "AdminProjects", new { id = item.Id }, null) |
											@Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
											@Html.ActionLink("Details", "Details", new { id = item.Id }) |

											@if (User.IsInRole("Admin"))
											{
												@Html.ActionLink("Assign PM", "AssignProject", new { id = item.Id })
												<br />
												@Html.ActionLink("Soft Delete", "SoftDelete", new { id = item.Id })
												<br />
												@Html.ActionLink("Delete", "Delete", new { id = item.Id })
											}
										</td>
									</tr>
								}
							}
						</tbody>
					</table>

					<script>
						$('#mytable').DataTable();
					</script>
				</div>
			</div>
		</div>
		@section Scripts {
			@Scripts.Render("~/bundles/jqueryval")
		}
